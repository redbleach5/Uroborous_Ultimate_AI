{"value": "                onClick={() => {\n                  setShowAccessDialog(false);\n                  setCurrentFolder(null);\n                  setAccessList([]);\n                }}\n                className=\"p-1 hover:bg-gray-100 rounded\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            {/* \u041f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f */}\n            <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={currentFolder.is_public === 1}\n                  onChange={() => handleTogglePublic(currentFolder)}\n                  className=\"w-4 h-4\"\n                />\n                <div className=\"flex items-center gap-2\">\n                  {currentFolder.is_public === 1 ? (\n                    <Globe className=\"w-5 h-5 text-blue-500\" />\n                  ) : (\n                    <Lock className=\"w-5 h-5 text-gray-400\" />\n                  )}\n                  <div>\n                    <span className=\"text-sm font-medium\">\n                      {currentFolder.is_public === 1 ? '\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u0430\u044f \u043f\u0430\u043f\u043a\u0430' : '\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u0430\u044f \u043f\u0430\u043f\u043a\u0430'}\n                    </span>\n                    <p className=\"text-xs text-gray-600 mt-1\">\n                      {currentFolder.is_public === 1 \n                        ? '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0432\u0441\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c \u0441\u0438\u0441\u0442\u0435\u043c\u044b'\n                        : '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c'}\n                    </p>\n                  </div>\n                </div>\n              </label>\n            </div>\n\n            {/* \u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c */}\n            <div className=\"mb-6\">\n              <h4 className=\"text-sm font-medium mb-3\">\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c ({accessList.length})</h4>\n              {loadingAccess ? (\n                <div className=\"text-center py-8 text-gray-500\">\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...</div>\n              ) : accessList.length === 0 ? (\n\n                onClick={() => {\n                  setShowAccessDialog(false);\n                  setCurrentFolder(null);\n                  setAccessList([]);\n                }}\n                className=\"p-1 hover:bg-gray-100 rounded\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            {/* \u041f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f */}\n            <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={currentFolder.is_public === 1}\n                  onChange={() => handleTogglePublic(currentFolder)}\n                  className=\"w-4 h-4\"\n                />\n                <div className=\"flex items-center gap-2\">\n                  {currentFolder.is_public === 1 ? (\n                    <Globe className=\"w-5 h-5 text-blue-500\" />\n                  ) : (\n                    <Lock className=\"w-5 h-5 text-gray-400\" />\n                  )}\n                  <div>\n                    <span className=\"text-sm font-medium\">\n                      {currentFolder.is_public === 1 ? '\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u0430\u044f \u043f\u0430\u043f\u043a\u0430' : '\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u0430\u044f \u043f\u0430\u043f\u043a\u0430'}\n                    </span>\n                    <p className=\"text-xs text-gray-600 mt-1\">\n                      {currentFolder.is_public === 1 \n                        ? '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0432\u0441\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c \u0441\u0438\u0441\u0442\u0435\u043c\u044b'\n                        : '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c'}\n                    </p>\n                  </div>\n                </div>\n              </label>\n            </div>\n\n            {/* \u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c */}\n            <div className=\"mb-6\">\n              <h4 className=\"text-sm font-medium mb-3\">\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c ({accessList.length})</h4>\n              {loadingAccess ? (\n                <div className=\"text-center py-8 text-gray-500\">\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...</div>\n              ) : accessList.length === 0 ? (\n\n            aria-label=\"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\"\n          >\n            <ChevronLeft className=\"w-6 h-6\" />\n          </button>\n        )}\n\n        {currentIndex < images.length - 1 && (\n          <button\n            onClick={goToNext}\n            className=\"absolute right-4 top-1/2 -translate-y-1/2 p-3 bg-black/50 hover:bg-black/70 rounded-full transition-colors text-white z-20\"\n            aria-label=\"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\"\n          >\n            <ChevronRight className=\"w-6 h-6\" />\n          </button>\n        )}\n\n        {/* \u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440 \u0441\u0431\u0440\u043e\u0441\u0430 zoom */}\n        {zoom > 1 && (\n          <button\n            onClick={handleResetZoom}\n            className=\"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-black/50 hover:bg-black/70 rounded-lg transition-colors text-white text-sm z-20\"\n          >\n            \u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043c\u0430\u0441\u0448\u0442\u0430\u0431\n          </button>\n        )}\n      </div>\n\n      {/* \u041c\u0438\u043d\u0438\u0430\u0442\u044e\u0440\u044b \u0432\u043d\u0438\u0437\u0443 */}\n      {images.length > 1 && (\n        <div className=\"absolute bottom-0 left-0 right-0 z-10 bg-gradient-to-t from-black/80 to-transparent p-4\">\n          <div className=\"flex gap-2 overflow-x-auto scrollbar-hide justify-center pb-2\">\n            {images.map((image, index) => (\n              <button\n                key={image.id}\n                onClick={() => setCurrentIndex(index)}\n                className={`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ${\n                  index === currentIndex\n                    ? 'border-white scale-110'\n                    : 'border-white/30 hover:border-white/50'\n                }`}\n              >\n                <img\n                  src={`/api/files/thumbnail/${image.id}?size=80`}\n                  alt={image.name}\n                  className=\"w-full h-full object-cover\"\n                  loading=\"lazy\"\n                />\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ImageGallery;\n\n\n                onClick={() => {\n                  setShowAccessDialog(false);\n                  setCurrentFolder(null);\n                  setAccessList([]);\n                }}\n                className=\"p-1 hover:bg-gray-100 rounded\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            {/* \u041f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f */}\n            <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={currentFolder.is_public === 1}\n                  onChange={() => handleTogglePublic(currentFolder)}\n                  className=\"w-4 h-4\"\n                />\n                <div className=\"flex items-center gap-2\">\n                  {currentFolder.is_public === 1 ? (\n                    <Globe className=\"w-5 h-5 text-blue-500\" />\n                  ) : (\n                    <Lock className=\"w-5 h-5 text-gray-400\" />\n                  )}\n                  <div>\n                    <span className=\"text-sm font-medium\">\n                      {currentFolder.is_public === 1 ? '\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u0430\u044f \u043f\u0430\u043f\u043a\u0430' : '\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u0430\u044f \u043f\u0430\u043f\u043a\u0430'}\n                    </span>\n                    <p className=\"text-xs text-gray-600 mt-1\">\n                      {currentFolder.is_public === 1 \n                        ? '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0432\u0441\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c \u0441\u0438\u0441\u0442\u0435\u043c\u044b'\n                        : '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c'}\n                    </p>\n                  </div>\n                </div>\n              </label>\n            </div>\n\n            {/* \u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c */}\n            <div className=\"mb-6\">\n              <h4 className=\"text-sm font-medium mb-3\">\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c ({accessList.length})</h4>\n              {loadingAccess ? (\n                <div className=\"text-center py-8 text-gray-500\">\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...</div>\n              ) : accessList.length === 0 ? (\n\n                onClick={() => {\n                  setShowAccessDialog(false);\n                  setCurrentFolder(null);\n                  setAccessList([]);\n                }}\n                className=\"p-1 hover:bg-gray-100 rounded\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            {/* \u041f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f */}\n            <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={currentFolder.is_public === 1}\n                  onChange={() => handleTogglePublic(currentFolder)}\n                  className=\"w-4 h-4\"\n                />\n                <div className=\"flex items-center gap-2\">\n                  {currentFolder.is_public === 1 ? (\n                    <Globe className=\"w-5 h-5 text-blue-500\" />\n                  ) : (\n                    <Lock className=\"w-5 h-5 text-gray-400\" />\n                  )}\n                  <div>\n                    <span className=\"text-sm font-medium\">\n                      {currentFolder.is_public === 1 ? '\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u0430\u044f \u043f\u0430\u043f\u043a\u0430' : '\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u0430\u044f \u043f\u0430\u043f\u043a\u0430'}\n                    </span>\n                    <p className=\"text-xs text-gray-600 mt-1\">\n                      {currentFolder.is_public === 1 \n                        ? '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0432\u0441\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c \u0441\u0438\u0441\u0442\u0435\u043c\u044b'\n                        : '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c'}\n                    </p>\n                  </div>\n                </div>\n              </label>\n            </div>\n\n            {/* \u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c */}\n            <div className=\"mb-6\">\n              <h4 className=\"text-sm font-medium mb-3\">\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c ({accessList.length})</h4>\n              {loadingAccess ? (\n                <div className=\"text-center py-8 text-gray-500\">\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...</div>\n              ) : accessList.length === 0 ? (\n\n                onClick={() => {\n                  setShowAccessDialog(false);\n                  setCurrentFolder(null);\n                  setAccessList([]);\n                }}\n                className=\"p-1 hover:bg-gray-100 rounded\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            {/* \u041f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f */}\n            <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={currentFolder.is_public === 1}\n                  onChange={() => handleTogglePublic(currentFolder)}\n                  className=\"w-4 h-4\"\n                />\n                <div className=\"flex items-center gap-2\">\n                  {currentFolder.is_public === 1 ? (\n                    <Globe className=\"w-5 h-5 text-blue-500\" />\n                  ) : (\n                    <Lock className=\"w-5 h-5 text-gray-400\" />\n                  )}\n                  <div>\n                    <span className=\"text-sm font-medium\">\n                      {currentFolder.is_public === 1 ? '\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u0430\u044f \u043f\u0430\u043f\u043a\u0430' : '\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u0430\u044f \u043f\u0430\u043f\u043a\u0430'}\n                    </span>\n                    <p className=\"text-xs text-gray-600 mt-1\">\n                      {currentFolder.is_public === 1 \n                        ? '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0432\u0441\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c \u0441\u0438\u0441\u0442\u0435\u043c\u044b'\n                        : '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c'}\n                    </p>\n                  </div>\n                </div>\n              </label>\n            </div>\n\n            {/* \u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c */}\n            <div className=\"mb-6\">\n              <h4 className=\"text-sm font-medium mb-3\">\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c ({accessList.length})</h4>\n              {loadingAccess ? (\n                <div className=\"text-center py-8 text-gray-500\">\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...</div>\n              ) : accessList.length === 0 ? (\n\n            aria-label=\"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\"\n          >\n            <ChevronLeft className=\"w-6 h-6\" />\n          </button>\n        )}\n\n        {currentIndex < images.length - 1 && (\n          <button\n            onClick={goToNext}\n            className=\"absolute right-4 top-1/2 -translate-y-1/2 p-3 bg-black/50 hover:bg-black/70 rounded-full transition-colors text-white z-20\"\n            aria-label=\"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\"\n          >\n            <ChevronRight className=\"w-6 h-6\" />\n          </button>\n        )}\n\n        {/* \u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440 \u0441\u0431\u0440\u043e\u0441\u0430 zoom */}\n        {zoom > 1 && (\n          <button\n            onClick={handleResetZoom}\n            className=\"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-black/50 hover:bg-black/70 rounded-lg transition-colors text-white text-sm z-20\"\n          >\n            \u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043c\u0430\u0441\u0448\u0442\u0430\u0431\n          </button>\n        )}\n      </div>\n\n      {/* \u041c\u0438\u043d\u0438\u0430\u0442\u044e\u0440\u044b \u0432\u043d\u0438\u0437\u0443 */}\n      {images.length > 1 && (\n        <div className=\"absolute bottom-0 left-0 right-0 z-10 bg-gradient-to-t from-black/80 to-transparent p-4\">\n          <div className=\"flex gap-2 overflow-x-auto scrollbar-hide justify-center pb-2\">\n            {images.map((image, index) => (\n              <button\n                key={image.id}\n                onClick={() => setCurrentIndex(index)}\n                className={`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ${\n                  index === currentIndex\n                    ? 'border-white scale-110'\n                    : 'border-white/30 hover:border-white/50'\n                }`}\n              >\n                <img\n                  src={`/api/files/thumbnail/${image.id}?size=80`}\n                  alt={image.name}\n                  className=\"w-full h-full object-cover\"\n                  loading=\"lazy\"\n                />\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ImageGallery;\n\n\n                onClick={() => {\n                  setShowAccessDialog(false);\n                  setCurrentFolder(null);\n                  setAccessList([]);\n                }}\n                className=\"p-1 hover:bg-gray-100 rounded\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            {/* \u041f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f */}\n            <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={currentFolder.is_public === 1}\n                  onChange={() => handleTogglePublic(currentFolder)}\n                  className=\"w-4 h-4\"\n                />\n                <div className=\"flex items-center gap-2\">\n                  {currentFolder.is_public === 1 ? (\n                    <Globe className=\"w-5 h-5 text-blue-500\" />\n                  ) : (\n                    <Lock className=\"w-5 h-5 text-gray-400\" />\n                  )}\n                  <div>\n                    <span className=\"text-sm font-medium\">\n                      {currentFolder.is_public === 1 ? '\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u0430\u044f \u043f\u0430\u043f\u043a\u0430' : '\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u0430\u044f \u043f\u0430\u043f\u043a\u0430'}\n                    </span>\n                    <p className=\"text-xs text-gray-600 mt-1\">\n                      {currentFolder.is_public === 1 \n                        ? '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0432\u0441\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c \u0441\u0438\u0441\u0442\u0435\u043c\u044b'\n                        : '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c'}\n                    </p>\n                  </div>\n                </div>\n              </label>\n            </div>\n\n            {/* \u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c */}\n            <div className=\"mb-6\">\n              <h4 className=\"text-sm font-medium mb-3\">\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c ({accessList.length})</h4>\n              {loadingAccess ? (\n                <div className=\"text-center py-8 text-gray-500\">\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...</div>\n              ) : accessList.length === 0 ? (\n\n                onClick={() => {\n                  setShowAccessDialog(false);\n                  setCurrentFolder(null);\n                  setAccessList([]);\n                }}\n                className=\"p-1 hover:bg-gray-100 rounded\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            {/* \u041f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f */}\n            <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={currentFolder.is_public === 1}\n                  onChange={() => handleTogglePublic(currentFolder)}\n                  className=\"w-4 h-4\"\n                />\n                <div className=\"flex items-center gap-2\">\n                  {currentFolder.is_public === 1 ? (\n                    <Globe className=\"w-5 h-5 text-blue-500\" />\n                  ) : (\n                    <Lock className=\"w-5 h-5 text-gray-400\" />\n                  )}\n                  <div>\n                    <span className=\"text-sm font-medium\">\n                      {currentFolder.is_public === 1 ? '\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u0430\u044f \u043f\u0430\u043f\u043a\u0430' : '\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u0430\u044f \u043f\u0430\u043f\u043a\u0430'}\n                    </span>\n                    <p className=\"text-xs text-gray-600 mt-1\">\n                      {currentFolder.is_public === 1 \n                        ? '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0432\u0441\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c \u0441\u0438\u0441\u0442\u0435\u043c\u044b'\n                        : '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c'}\n                    </p>\n                  </div>\n                </div>\n              </label>\n            </div>\n\n            {/* \u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c */}\n            <div className=\"mb-6\">\n              <h4 className=\"text-sm font-medium mb-3\">\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c ({accessList.length})</h4>\n              {loadingAccess ? (\n                <div className=\"text-center py-8 text-gray-500\">\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...</div>\n              ) : accessList.length === 0 ? (\n\n            aria-label=\"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\"\n          >\n            <ChevronLeft className=\"w-6 h-6\" />\n          </button>\n        )}\n\n        {currentIndex < images.length - 1 && (\n          <button\n            onClick={goToNext}\n            className=\"absolute right-4 top-1/2 -translate-y-1/2 p-3 bg-black/50 hover:bg-black/70 rounded-full transition-colors text-white z-20\"\n            aria-label=\"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\"\n          >\n            <ChevronRight className=\"w-6 h-6\" />\n          </button>\n        )}\n\n        {/* \u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440 \u0441\u0431\u0440\u043e\u0441\u0430 zoom */}\n        {zoom > 1 && (\n          <button\n            onClick={handleResetZoom}\n            className=\"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-black/50 hover:bg-black/70 rounded-lg transition-colors text-white text-sm z-20\"\n          >\n            \u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043c\u0430\u0441\u0448\u0442\u0430\u0431\n          </button>\n        )}\n      </div>\n\n      {/* \u041c\u0438\u043d\u0438\u0430\u0442\u044e\u0440\u044b \u0432\u043d\u0438\u0437\u0443 */}\n      {images.length > 1 && (\n        <div className=\"absolute bottom-0 left-0 right-0 z-10 bg-gradient-to-t from-black/80 to-transparent p-4\">\n          <div className=\"flex gap-2 overflow-x-auto scrollbar-hide justify-center pb-2\">\n            {images.map((image, index) => (\n              <button\n                key={image.id}\n                onClick={() => setCurrentIndex(index)}\n                className={`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ${\n                  index === currentIndex\n                    ? 'border-white scale-110'\n                    : 'border-white/30 hover:border-white/50'\n                }`}\n              >\n                <img\n                  src={`/api/files/thumbnail/${image.id}?size=80`}\n                  alt={image.name}\n                  className=\"w-full h-full object-cover\"\n                  loading=\"lazy\"\n                />\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ImageGallery;\n", "timestamp": 1767036252.134565, "ttl": 3600}