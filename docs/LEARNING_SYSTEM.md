# –°–∏—Å—Ç–µ–º–∞ –û–±—É—á–µ–Ω–∏—è (Learning System)

> **–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –î–µ–∫–∞–±—Ä—å 2025

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –æ–±—É—á–µ–Ω–∏—è AILLM –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –æ–ø—ã—Ç–∞** –∞–≥–µ–Ω—Ç–∞–º–∏. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω—ã—Ö LLM-—Å–∏—Å—Ç–µ–º, –≥–¥–µ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –Ω–µ–∑–∞–≤–∏—Å–∏–º, AILLM –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–≤–æ–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç –æ–ø—ã—Ç –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üß† **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å (LongTermMemory)** ‚Äî —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —É—Å–ø–µ—à–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
- üë§ **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚ö†Ô∏è **–ò–∑–±–µ–∂–∞–Ω–∏–µ –æ—à–∏–±–æ–∫** ‚Äî –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—à–ª—ã—Ö –Ω–µ—É–¥–∞—á
- üìä **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π** ‚Äî –≤—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π LLM –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∑–∞–¥–∞—á
- üéì **–†–µ—Ñ–ª–µ–∫—Å–∏—è** ‚Äî —Å–∞–º–æ–∞–Ω–∞–ª–∏–∑ –∏ –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ó–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏

–ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –∞–≥–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É, —Å–∏—Å—Ç–µ–º–∞:
1. –ü—Ä–æ–≤–æ–¥–∏—Ç **—Ä–µ—Ñ–ª–µ–∫—Å–∏—é** (—Å–∞–º–æ–∞–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞)
2. –û—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º: –ø–æ–ª–Ω–æ—Ç–∞, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å, –∫–∞—á–µ—Å—Ç–≤–æ
3. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ SQLite –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** (`memory/learning.db`)

```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
await learning_system.record_reflection(
    agent_name="code_writer",
    task="–°–æ–∑–¥–∞—Ç—å REST API",
    reflection={
        "completeness": 85,
        "correctness": 90,
        "quality": 80,
        "overall_score": 85.5,
        "issues": ["–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫"],
        "improvements": ["–î–æ–±–∞–≤–∏—Ç—å try/catch"]
    },
    was_corrected=True,
    correction_attempts=2,
    execution_time=5.3
)
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–≥–æ –æ–ø—ã—Ç–∞

–ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏ —Å–∏—Å—Ç–µ–º–∞:

1. **–ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Å–∞–π—Ç—ã** –æ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö –∞–≥–µ–Ω—Ç–∞
2. **–î–æ–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–º–ø—Ç** –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏
3. **–ò—â–µ—Ç –ø–æ—Ö–æ–∂–∏–µ —É—Å–ø–µ—à–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è** –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø—Ä–æ–º–ø—Ç
prompt_enhancement = await learning_system.get_prompt_enhancement(
    agent_name="code_writer",
    task="–°–æ–∑–¥–∞—Ç—å API..."
)
# –ù–∞–ø—Ä–∏–º–µ—Ä: "–í–ê–ñ–ù–û: –ò–∑–±–µ–≥–∞–π—Ç–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫"
```

### 3. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã

–ü—Ä–æ–º–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–æ–≥–∞—â–∞—é—Ç—Å—è:
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏ –æ —á–∞—Å—Ç—ã—Ö –æ—à–∏–±–∫–∞—Ö
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –∫–∞—á–µ—Å—Ç–≤–∞
- –°—Å—ã–ª–∫–∞–º–∏ –Ω–∞ —É—Å–ø–µ—à–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    BaseAgent     ‚îÇ
‚îÇ  (reflection)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ record_reflection()
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  LearningSystem  ‚îÇ
‚îÇ   (singleton)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  SQLite Database ‚îÇ
‚îÇ memory/learning.db‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### LearningSystem (`memory/learning.db`)

1. **reflection_history** - –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Ä–µ—Ñ–ª–µ–∫—Å–∏–π
   - agent_name, task, completeness, correctness, quality
   - overall_score, issues, improvements
   - was_corrected, correction_attempts

2. **successful_solutions** - –£—Å–ø–µ—à–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - agent_name, task_pattern, quality_score
   - reuse_count, last_used

3. **prompt_recommendations** - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–º–ø—Ç–æ–≤
   - agent_name, recommendation
   - effectiveness_score

4. **error_patterns** - –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è
   - error_pattern, solution_pattern
   - occurrence_count, resolved_count

### LongTermMemory (`memory/memories.db`)

5. **memories** - –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á
   - task, solution, agent, embedding
   - quality_score, feedback_count, avg_rating
   - task_type, model_used

6. **user_preferences** ‚Äî –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - user_id, preference_key, preference_value
   - –ü—Ä–∏–º–µ—Ä—ã –∫–ª—é—á–µ–π: `language`, `code_style`, `detail_level`

7. **failed_tasks** ‚Äî –ù–µ—É–¥–∞—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
   - task, agent, error_type, error_message
   - embedding (–¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞)
   - occurrence_count, resolution

8. **model_task_performance** ‚Äî –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–µ–π –ø–æ —Ç–∏–ø–∞–º –∑–∞–¥–∞—á
   - model_name, task_type
   - success_count, fail_count, avg_quality, avg_duration

## API Endpoints

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/api/v1/learning/stats` | –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤ |
| GET | `/api/v1/learning/progress` | –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è —Å —É—Ä–æ–≤–Ω—è–º–∏ |
| GET | `/api/v1/learning/agent/{agent_name}` | –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ |
| GET | `/api/v1/learning/recommendations/{agent_name}` | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –¥–ª—è –∞–≥–µ–Ω—Ç–∞ |

### –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (NEW)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/api/v1/learning/preferences` | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| POST | `/api/v1/learning/preferences` | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–¥–Ω–æ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ |
| PUT | `/api/v1/learning/preferences` | –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π |

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–ª—é—á–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π:**
- `language` ‚Äî —è–∑—ã–∫ –æ—Ç–≤–µ—Ç–æ–≤ (`"ru"`, `"en"`)
- `code_style` ‚Äî —Å—Ç–∏–ª—å –∫–æ–¥–∞ (`"pythonic"`, `"verbose"`, `"minimal"`)
- `detail_level` ‚Äî —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ (`"brief"`, `"detailed"`, `"exhaustive"`)
- `preferred_frameworks` ‚Äî –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ (`["fastapi", "django"]`)
- `response_format` ‚Äî —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (`"markdown"`, `"plain"`)

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞–º—è—Ç–∏ (NEW)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/api/v1/learning/memory/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–∞–º—è—Ç–∏ |
| GET | `/api/v1/learning/memory/models` | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π –ø–æ —Ç–∏–ø–∞–º –∑–∞–¥–∞—á |
| GET | `/api/v1/learning/memory/failed` | –°–ø–∏—Å–æ–∫ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–¥–∞—á –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ |

## UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

–í sidebar –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–∏–¥–∂–µ—Ç **LearningProgress** —Å:
- –¢–µ–∫—É—â–∏–º —É—Ä–æ–≤–Ω–µ–º –æ–±—É—á–µ–Ω–∏—è
- Success rate
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –ø–æ –∞–≥–µ–Ω—Ç–∞–º (–ø—Ä–∏ —Ä–∞—Å–∫—Ä—ã—Ç–∏–∏)

## –£—Ä–æ–≤–Ω–∏ –æ–±—É—á–µ–Ω–∏—è

| –£—Ä–æ–≤–µ–Ω—å | –ó–∞–¥–∞—á | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-------|----------|
| –ù–∞—á–∞–ª—å–Ω—ã–π | < 10 | –°–∏—Å—Ç–µ–º–∞ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å –æ–ø—ã—Ç |
| –ë–∞–∑–æ–≤—ã–π | 10-50 | –°–∏—Å—Ç–µ–º–∞ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã |
| –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π | 50-200 | –°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–Ω–æ –æ–±—É—á–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø—ã—Ç–∞ |
| –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π | > 200 | –°–∏—Å—Ç–µ–º–∞ –∏–º–µ–µ—Ç –±–æ–≥–∞—Ç—ã–π –æ–ø—ã—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ |

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ–±—É—á–µ–Ω–∏—è

```bash
curl http://localhost:8000/api/v1/learning/stats
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–ª—è –∞–≥–µ–Ω—Ç–∞

```bash
curl "http://localhost:8000/api/v1/learning/recommendations/code_writer?task=–°–æ–∑–¥–∞—Ç—å%20REST%20API"
```

## –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—ã –ø–æ–¥ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ
curl -X POST http://localhost:8000/api/v1/learning/preferences \
  -H "Content-Type: application/json" \
  -d '{"key": "language", "value": "ru", "user_id": "default"}'

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∏–ª—å –∫–æ–¥–∞
curl -X POST http://localhost:8000/api/v1/learning/preferences \
  -H "Content-Type: application/json" \
  -d '{"key": "code_style", "value": "pythonic"}'

# –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
curl -X PUT http://localhost:8000/api/v1/learning/preferences \
  -H "Content-Type: application/json" \
  -d '{
    "preferences": {
      "language": "ru",
      "code_style": "pythonic",
      "detail_level": "detailed",
      "preferred_frameworks": ["fastapi", "pydantic"]
    }
  }'
```

–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –ø—Ä–æ–º–ø—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ `get_personalization_prompt()`.

## –ò–∑–±–µ–∂–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ—à–∏–±–æ–∫

–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –Ω–µ—É–¥–∞—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ–± –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö:

1. **–ó–∞–ø–∏—Å—å –æ—à–∏–±–æ–∫** ‚Äî –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ –∑–∞–¥–∞—á–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `failed_tasks`
2. **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** ‚Äî –ø—Ä–∏ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–µ –∏—â—É—Ç—Å—è –ø–æ—Ö–æ–∂–∏–µ –Ω–µ—É–¥–∞—á–∏
3. **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ –ø—Ä–æ–º–ø—Ç–µ** ‚Äî –∞–≥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ –ø—Ä–æ—à–ª—ã—Ö –æ—à–∏–±–∫–∞—Ö

```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ
await agent.record_failure(
    task="–°–æ–∑–¥–∞—Ç—å API...",
    error_type="SyntaxError",
    error_message="Unexpected token...",
    error_context={"duration": 5.2}
)

# –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è:
# ‚ö†Ô∏è –ü–æ—Ö–æ–∂–∞—è –∑–∞–¥–∞—á–∞ (—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ 85%) —Ä–∞–Ω–µ–µ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –æ—à–∏–±–∫–æ–π:
#    –¢–∏–ø: SyntaxError
#    –°–æ–æ–±—â–µ–Ω–∏–µ: Unexpected token...
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π

–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–µ–π –ø–æ —Ç–∏–ø–∞–º –∑–∞–¥–∞—á:

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
curl http://localhost:8000/api/v1/learning/memory/models

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
{
  "recommendations": {
    "code": "qwen2.5-coder:7b",
    "chat": "llama3.2:3b",
    "analysis": "gemma2:9b",
    "reasoning": "deepseek-r1:14b"
  }
}

# –î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏
curl "http://localhost:8000/api/v1/learning/memory/models?task_type=code"
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** ‚Äî –æ–ø—ã—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
2. **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** ‚Äî –ø—Ä–æ–º–ø—Ç—ã —É–ª—É—á—à–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏
3. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** ‚Äî –æ—Ç–≤–µ—Ç—ã –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** ‚Äî –º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –∏–∑—É—á–∏–ª–∞
5. **–°–∞–º–æ—É–ª—É—á—à–µ–Ω–∏–µ** ‚Äî —Å–∏—Å—Ç–µ–º–∞ —É—á–∏—Ç—Å—è –∏–∑–±–µ–≥–∞—Ç—å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –æ—à–∏–±–æ–∫
6. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏ –¥–ª—è –∑–∞–¥–∞—á–∏

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í `config.yaml`:

```yaml
agents:
  reflection:
    enabled: true
    max_retries: 2
    min_quality_threshold: 60.0
```

–î–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤:

```yaml
agents:
  code_writer:
    reflection:
      enabled: true
      min_quality_threshold: 70.0  # –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä–æ–≥ –¥–ª—è –∫–æ–¥–∞
```

